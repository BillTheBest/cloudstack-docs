<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Quick Install Guide</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta name="generator" content="publican 2.8" /><meta name="package" content="Apache_CloudStack-qig-4.1.1-en-US-0-0" /><meta name="description" content="This guide is designed to provide a strict environment to guarantee a higher degree of success in initial deployments of Apache CloudStack. All of the elements of the environment will be provided to you. Apache CloudStack is capable of much more complex configurations, but they are beyond the scope of this document." /><script type="text/javascript" src="../../../../../toc.js"></script><script type="text/javascript">
              addID('Apache_CloudStack');
              
	      addID('Apache_CloudStack.4.1.1');
              
              addID('Apache_CloudStack.4.1.1.books');
	      addID('Apache_CloudStack.4.1.1.qig');
              </script></head><body class="toc_embeded "><div id="tocdiv" class="toc"><iframe id="tocframe" class="toc" src="../../../../toc.html">This is an iframe, to view it upgrade your browser or enable iframe display.</iframe></div><p id="title"><a class="left" href="http://cloudstack.apache.org"><img src="Common_Content/images/image_left.png" alt="Product Site" /></a><a class="right" href="http://cloudstack.apache.org/docs"><img src="Common_Content/images/image_right.png" alt="Documentation Site" /></a></p><div xml:lang="en-US" class="book" id="idm41132768" lang="en-US"><div class="titlepage"><div><div class="producttitle"><span class="productname">Apache CloudStack</span> <span class="productnumber">4.1.1</span></div><div><h1 id="idm41132768" class="title">Quick Install Guide</h1></div><div><h2 class="subtitle">Prescriptive instructions for deploying Apache CloudStack</h2></div><p class="edition">Edition 0</p><div><h3 class="corpauthor">
		<span class="inlinemediaobject"><object data="Common_Content/images/title_logo.svg" type="image/svg+xml"> </object></span>

	</h3></div><div><div xml:lang="en-US" class="authorgroup" lang="en-US"><div class="author"><h3 class="author"><span class="firstname">Apache</span> <span class="surname">CloudStack</span></h3></div></div></div><hr /><div><div id="idm34397184" class="legalnotice"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to you under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at
	</div><div class="para">
		http://www.apache.org/licenses/LICENSE-2.0
	</div><div class="para">
		Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
	</div><div class="para">
		Apache CloudStack is an effort undergoing incubation at The Apache Software Foundation (ASF).
	</div><div class="para">
		Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.
	</div><div class="para">
		CloudStack® is a registered trademark of the Apache Software Foundation.
	</div><div class="para">
		Apache CloudStack, the CloudStack word design, the Apache CloudStack word design, and the cloud monkey logo are trademarks of the Apache Software Foundation.
	</div></div></div><div><div class="abstract"><h6>Abstract</h6><div class="para">
			This guide is designed to provide a strict environment to guarantee a higher degree of success in initial deployments of Apache CloudStack. All of the elements of the environment will be provided to you. Apache CloudStack is capable of much more complex configurations, but they are beyond the scope of this document.
		</div></div></div></div><hr /></div><div class="toc"><dl class="toc"><dt><span class="preface"><a href="#pref-qig-Preface">Preface</a></span></dt><dd><dl><dt><span class="section"><a href="#idp3066560">1. Document Conventions</a></span></dt><dd><dl><dt><span class="section"><a href="#idm46668672">1.1. Typographic Conventions</a></span></dt><dt><span class="section"><a href="#idm42116432">1.2. Pull-quote Conventions</a></span></dt><dt><span class="section"><a href="#idm51451504">1.3. Notes and Warnings</a></span></dt></dl></dd><dt><span class="section"><a href="#feedback">2. Submitting Feedback and Getting Help</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-qig-Overview">1. Overview</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-qig-Overview-What_building">1.1. What exactly are we building?</a></span></dt><dt><span class="section"><a href="#sect-qig-Overview-hilevel">1.2. High level overview of the process</a></span></dt><dt><span class="section"><a href="#sect-qig-Overview-prereqs">1.3. Prerequisites</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-qig-Environment">2. Environment</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-qig-Environment-operatingsys">2.1. Operating System</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-qig-Environment-operatingsys-network">2.1.1. Configuring the network</a></span></dt><dt><span class="section"><a href="#sect-qig-Environment-operatingsys-hostname">2.1.2. Hostname</a></span></dt><dt><span class="section"><a href="#sect-qig-Environment-operatingsys-selinux">2.1.3. SELinux</a></span></dt><dt><span class="section"><a href="#sect-qig-Environment-operatingsys-ntp">2.1.4. NTP</a></span></dt><dt><span class="section"><a href="#sect-qig-Environment-operatingsys-repoconfig">2.1.5. Configuring the CloudStack Package Repository</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-qig-Environment-nfs">2.2. NFS</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-qig-Management">3. Installation of the management server</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-qig-Management-database">3.1. Database Installation and Configuration</a></span></dt><dt><span class="section"><a href="#sect-qig-Management-installation">3.2. Installation</a></span></dt><dt><span class="section"><a href="#sect-qig-Management-templatesetup">3.3. System Template Setup</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-qig-KVM">4. KVM Setup and installation</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-qig-KVM-Prerequisites">4.1. Prerequisites</a></span></dt><dt><span class="section"><a href="#sect-qig-KVM-Installation">4.2. Installation</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-qig-KVM-Configuration">4.2.1. KVM Configuration</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chap-qig-Config">5. Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-qig-Config-UI_Access">5.1. UI Access</a></span></dt><dt><span class="section"><a href="#sect-qig-Config-Zone">5.2. Setting up a Zone</a></span></dt><dt><span class="section"><a href="#sect-qig-Config-Pod">5.3. Pod Configuration</a></span></dt><dt><span class="section"><a href="#Runbook-config-cluster">5.4. Cluster</a></span></dt><dd><dl><dt><span class="section"><a href="#Runbook-config-cluster-pristorage">5.4.1. Primary Storage</a></span></dt><dt><span class="section"><a href="#Runbook-config-cluster-secstorage">5.4.2. Secondary Storage</a></span></dt></dl></dd></dl></dd><dt><span class="appendix"><a href="#appe-qig-Revision_History">A. Revision History</a></span></dt></dl></div><div xml:lang="en-US" class="preface" id="pref-qig-Preface" lang="en-US"><div class="titlepage"><div><div><h1 class="title">Preface</h1></div></div></div><div xml:lang="en-US" class="section" id="idp3066560" lang="en-US"><div class="titlepage"><div><div><h2 class="title" id="idp3066560">1. Document Conventions</h2></div></div></div><div class="para">
		This manual uses several conventions to highlight certain words and phrases and draw attention to specific pieces of information.
	</div><div class="para">
		In PDF and paper editions, this manual uses typefaces drawn from the <a href="https://fedorahosted.org/liberation-fonts/">Liberation Fonts</a> set. The Liberation Fonts set is also used in HTML editions if the set is installed on your system. If not, alternative but equivalent typefaces are displayed. Note: Red Hat Enterprise Linux 5 and later includes the Liberation Fonts set by default.
	</div><div class="section" id="idm46668672"><div class="titlepage"><div><div><h3 class="title" id="idm46668672">1.1. Typographic Conventions</h3></div></div></div><div class="para">
			Four typographic conventions are used to call attention to specific words and phrases. These conventions, and the circumstances they apply to, are as follows.
		</div><div class="para">
			<code class="literal">Mono-spaced Bold</code>
		</div><div class="para">
			Used to highlight system input, including shell commands, file names and paths. Also used to highlight keycaps and key combinations. For example:
		</div><div class="blockquote"><blockquote class="blockquote"><div class="para">
				To see the contents of the file <code class="filename">my_next_bestselling_novel</code> in your current working directory, enter the <code class="command">cat my_next_bestselling_novel</code> command at the shell prompt and press <span class="keycap"><strong>Enter</strong></span> to execute the command.
			</div></blockquote></div><div class="para">
			The above includes a file name, a shell command and a keycap, all presented in mono-spaced bold and all distinguishable thanks to context.
		</div><div class="para">
			Key combinations can be distinguished from keycaps by the hyphen connecting each part of a key combination. For example:
		</div><div class="blockquote"><blockquote class="blockquote"><div class="para">
				Press <span class="keycap"><strong>Enter</strong></span> to execute the command.
			</div><div class="para">
				Press <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F2</strong></span> to switch to the first virtual terminal. Press <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span> to return to your X-Windows session.
			</div></blockquote></div><div class="para">
			The first paragraph highlights the particular keycap to press. The second highlights two key combinations (each a set of three keycaps with each set pressed simultaneously).
		</div><div class="para">
			If source code is discussed, class names, methods, functions, variable names and returned values mentioned within a paragraph will be presented as above, in <code class="literal">mono-spaced bold</code>. For example:
		</div><div class="blockquote"><blockquote class="blockquote"><div class="para">
				File-related classes include <code class="classname">filesystem</code> for file systems, <code class="classname">file</code> for files, and <code class="classname">dir</code> for directories. Each class has its own associated set of permissions.
			</div></blockquote></div><div class="para">
			<span class="application"><strong>Proportional Bold</strong></span>
		</div><div class="para">
			This denotes words or phrases encountered on a system, including application names; dialog box text; labeled buttons; check-box and radio button labels; menu titles and sub-menu titles. For example:
		</div><div class="blockquote"><blockquote class="blockquote"><div class="para">
				Choose <span class="guimenu"><strong>System</strong></span> → <span class="guisubmenu"><strong>Preferences</strong></span> → <span class="guimenuitem"><strong>Mouse</strong></span> from the main menu bar to launch <span class="application"><strong>Mouse Preferences</strong></span>. In the <span class="guilabel"><strong>Buttons</strong></span> tab, click the <span class="guilabel"><strong>Left-handed mouse</strong></span> check box and click <span class="guibutton"><strong>Close</strong></span> to switch the primary mouse button from the left to the right (making the mouse suitable for use in the left hand).
			</div><div class="para">
				To insert a special character into a <span class="application"><strong>gedit</strong></span> file, choose <span class="guimenu"><strong>Applications</strong></span> → <span class="guisubmenu"><strong>Accessories</strong></span> → <span class="guimenuitem"><strong>Character Map</strong></span> from the main menu bar. Next, choose <span class="guimenu"><strong>Search</strong></span> → <span class="guimenuitem"><strong>Find…</strong></span> from the <span class="application"><strong>Character Map</strong></span> menu bar, type the name of the character in the <span class="guilabel"><strong>Search</strong></span> field and click <span class="guibutton"><strong>Next</strong></span>. The character you sought will be highlighted in the <span class="guilabel"><strong>Character Table</strong></span>. Double-click this highlighted character to place it in the <span class="guilabel"><strong>Text to copy</strong></span> field and then click the <span class="guibutton"><strong>Copy</strong></span> button. Now switch back to your document and choose <span class="guimenu"><strong>Edit</strong></span> → <span class="guimenuitem"><strong>Paste</strong></span> from the <span class="application"><strong>gedit</strong></span> menu bar.
			</div></blockquote></div><div class="para">
			The above text includes application names; system-wide menu names and items; application-specific menu names; and buttons and text found within a GUI interface, all presented in proportional bold and all distinguishable by context.
		</div><div class="para">
			<code class="command"><em class="replaceable"><code>Mono-spaced Bold Italic</code></em></code> or <span class="application"><strong><em class="replaceable"><code>Proportional Bold Italic</code></em></strong></span>
		</div><div class="para">
			Whether mono-spaced bold or proportional bold, the addition of italics indicates replaceable or variable text. Italics denotes text you do not input literally or displayed text that changes depending on circumstance. For example:
		</div><div class="blockquote"><blockquote class="blockquote"><div class="para">
				To connect to a remote machine using ssh, type <code class="command">ssh <em class="replaceable"><code>username</code></em>@<em class="replaceable"><code>domain.name</code></em></code> at a shell prompt. If the remote machine is <code class="filename">example.com</code> and your username on that machine is john, type <code class="command">ssh john@example.com</code>.
			</div><div class="para">
				The <code class="command">mount -o remount <em class="replaceable"><code>file-system</code></em></code> command remounts the named file system. For example, to remount the <code class="filename">/home</code> file system, the command is <code class="command">mount -o remount /home</code>.
			</div><div class="para">
				To see the version of a currently installed package, use the <code class="command">rpm -q <em class="replaceable"><code>package</code></em></code> command. It will return a result as follows: <code class="command"><em class="replaceable"><code>package-version-release</code></em></code>.
			</div></blockquote></div><div class="para">
			Note the words in bold italics above — username, domain.name, file-system, package, version and release. Each word is a placeholder, either for text you enter when issuing a command or for text displayed by the system.
		</div><div class="para">
			Aside from standard usage for presenting the title of a work, italics denotes the first use of a new and important term. For example:
		</div><div class="blockquote"><blockquote class="blockquote"><div class="para">
				Publican is a <em class="firstterm">DocBook</em> publishing system.
			</div></blockquote></div></div><div class="section" id="idm42116432"><div class="titlepage"><div><div><h3 class="title" id="idm42116432">1.2. Pull-quote Conventions</h3></div></div></div><div class="para">
			Terminal output and source code listings are set off visually from the surrounding text.
		</div><div class="para">
			Output sent to a terminal is set in <code class="computeroutput">mono-spaced roman</code> and presented thus:
		</div><pre class="screen">books        Desktop   documentation  drafts  mss    photos   stuff  svn
books_tests  Desktop1  downloads      images  notes  scripts  svgs</pre><div class="para">
			Source-code listings are also set in <code class="computeroutput">mono-spaced roman</code> but add syntax highlighting as follows:
		</div><pre class="programlisting">package org.<span class="perl_Function">jboss</span>.<span class="perl_Function">book</span>.<span class="perl_Function">jca</span>.<span class="perl_Function">ex1</span>;

<span class="perl_Keyword">import</span> javax.naming.InitialContext;

<span class="perl_Keyword">public</span> <span class="perl_Keyword">class</span> ExClient
{
   <span class="perl_Keyword">public</span> <span class="perl_DataType">static</span> <span class="perl_DataType">void</span> <span class="perl_Function">main</span>(String args[]) 
       <span class="perl_Keyword">throws</span> Exception
   {
      InitialContext iniCtx = <span class="perl_Keyword">new</span> InitialContext();
      Object         ref    = iniCtx.<span class="perl_Function">lookup</span>(<span class="perl_String">"EchoBean"</span>);
      EchoHome       home   = (EchoHome) ref;
      Echo           echo   = home.<span class="perl_Function">create</span>();

      System.<span class="perl_Function">out</span>.<span class="perl_Function">println</span>(<span class="perl_String">"Created Echo"</span>);

      System.<span class="perl_Function">out</span>.<span class="perl_Function">println</span>(<span class="perl_String">"Echo.echo('Hello') = "</span> + echo.<span class="perl_Function">echo</span>(<span class="perl_String">"Hello"</span>));
   }
}</pre></div><div class="section" id="idm51451504"><div class="titlepage"><div><div><h3 class="title" id="idm51451504">1.3. Notes and Warnings</h3></div></div></div><div class="para">
			Finally, we use three visual styles to draw attention to information that might otherwise be overlooked.
		</div><div class="note"><div class="admonition_header"><h2>Note</h2></div><div class="admonition"><div class="para">
				Notes are tips, shortcuts or alternative approaches to the task at hand. Ignoring a note should have no negative consequences, but you might miss out on a trick that makes your life easier.
			</div></div></div><div class="important"><div class="admonition_header"><h2>Important</h2></div><div class="admonition"><div class="para">
				Important boxes detail things that are easily missed: configuration changes that only apply to the current session, or services that need restarting before an update will apply. Ignoring a box labeled 'Important' will not cause data loss but may cause irritation and frustration.
			</div></div></div><div class="warning"><div class="admonition_header"><h2>Warning</h2></div><div class="admonition"><div class="para">
				Warnings should not be ignored. Ignoring warnings will most likely cause data loss.
			</div></div></div></div></div><div xml:lang="en-US" class="section" id="feedback" lang="en-US"><div class="titlepage"><div><div><h2 class="title">2. Submitting Feedback and Getting Help</h2></div></div></div><a id="idp1716400" class="indexterm"></a><div class="para">
		If you find a typographical error in this manual, or if you have thought of a way to make this manual better, we would love to hear from you! Please submit a bug: <a href="https://issues.apache.org/jira/browse/CLOUDSTACK">https://issues.apache.org/jira/browse/CLOUDSTACK</a> against the component <span class="application"><strong>Doc</strong></span>.
	</div><div class="para">
		If you have a suggestion for improving the documentation, try to be as specific as possible when describing it. If you have found an error, please include the section number and some of the surrounding text so we can find it easily.
	</div><div class="para">
		Better yet, feel free to submit a patch if you would like to enhance the documentation. Our documentation is, along with the rest of the Apache CloudStack source code, kept in the project's git repository.
	</div><div class="para">
		The most efficient way to get help with Apache CloudStack is to ask on the mailing lists.
	</div><div class="para">
		The Apache CloudStack project has mailing lists for users and developers. These are the official channels of communication for the project and are the best way to get answers about using and contributing to CloudStack. It's a good idea to subscribe to the users@cloudstack.apache.org mailing list if you've deployed or are deploying CloudStack into production, and even for test deployments.
	</div><div class="para">
		The CloudStack developer's mailing list (dev@cloudstack.apache.org) is for discussions about CloudStack development, and is the best list for discussing possible bugs in CloudStack. Anyone contributing to CloudStack should be on this mailing list.
	</div><div class="para">
		To posts to the lists, you'll need to be subscribed. See the <a href="http://cloudstack.apache.org/mailing-lists.html">CloudStack Web site</a> for instructions.
	</div></div></div><div xml:lang="en-US" class="chapter" id="chap-qig-Overview" lang="en-US"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Overview</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="#sect-qig-Overview-What_building">1.1. What exactly are we building?</a></span></dt><dt><span class="section"><a href="#sect-qig-Overview-hilevel">1.2. High level overview of the process</a></span></dt><dt><span class="section"><a href="#sect-qig-Overview-prereqs">1.3. Prerequisites</a></span></dt></dl></div><div class="para">
		Infrastructure-as-a-Service (IaaS) clouds can be a complex thing to build, and by definition they have a plethora of options, which often lead to confusion for even experienced admins who are newcomers to building cloud platforms. The goal for this runbook is to provide a straightforward set of instructions to get you up and running with CloudStack with a minimum amount of trouble.
	</div><div class="section" id="sect-qig-Overview-What_building"><div class="titlepage"><div><div><h2 class="title">1.1. What exactly are we building?</h2></div></div></div><div class="para">
			This runbook will focus on building a CloudStack cloud using KVM with CentOS 6.4 with NFS storage on a flat layer-2 network utilizing layer-3 network isolation (aka Security Groups), and doing it all on a single piece of hardware.
		</div><div class="para">
			KVM, or Kernel-based Virtual Machine is a virtualization technology for the Linux kernel. KVM supports native virtualization atop processors with hardware virtualization extensions.
		</div><div class="para">
			Security Groups act as distributed firewalls that control access to a group of virtual machines.
		</div></div><div class="section" id="sect-qig-Overview-hilevel"><div class="titlepage"><div><div><h2 class="title">1.2. High level overview of the process</h2></div></div></div><div class="para">
			Before we actually get to installing CloudStack, we'll start with installing our base operating system, and then configuring that to act as an NFS server for several types of storage. We'll install the management server, download the systemVMs, and finally install the agent software. Finally we'll spend a good deal of time configuring the entire cloud in the CloudStack web interface.
		</div></div><div class="section" id="sect-qig-Overview-prereqs"><div class="titlepage"><div><div><h2 class="title">1.3. Prerequisites</h2></div></div></div><div class="para">
			To complete this runbook you'll need the following items: 
			<div class="orderedlist"><ol><li class="listitem"><div class="para">
						At least one computer which supports hardware virtualization.
					</div></li><li class="listitem"><div class="para">
						The <a href="http://mirror.stanford.edu/yum/pub/centos/6.4/isos/x86_64/CentOS-6.4-x86_64-minimal.iso"> CentOS 6.4 x86_64 minimal install CD </a>
					</div></li><li class="listitem"><div class="para">
						A /24 network with the gateway being at xxx.xxx.xxx.1, no DHCP should be on this network and none of the computers running CloudStack will have a dynamic address. Again this is done for the sake of simplicity.
					</div></li></ol></div>

		</div></div></div><div xml:lang="en-US" class="chapter" id="chap-qig-Environment" lang="en-US"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Environment</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="#sect-qig-Environment-operatingsys">2.1. Operating System</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-qig-Environment-operatingsys-network">2.1.1. Configuring the network</a></span></dt><dt><span class="section"><a href="#sect-qig-Environment-operatingsys-hostname">2.1.2. Hostname</a></span></dt><dt><span class="section"><a href="#sect-qig-Environment-operatingsys-selinux">2.1.3. SELinux</a></span></dt><dt><span class="section"><a href="#sect-qig-Environment-operatingsys-ntp">2.1.4. NTP</a></span></dt><dt><span class="section"><a href="#sect-qig-Environment-operatingsys-repoconfig">2.1.5. Configuring the CloudStack Package Repository</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-qig-Environment-nfs">2.2. NFS</a></span></dt></dl></div><div class="para">
		Before you begin, you need to prepare the environment before you install CloudStack. We will go over the steps to prepare now.
	</div><div class="section" id="sect-qig-Environment-operatingsys"><div class="titlepage"><div><div><h2 class="title">2.1. Operating System</h2></div></div></div><div class="para">
			Using the CentOS 6.4 x86_64 minimal install ISO, you'll need to install CentOS on your hardware. The defaults will generally be acceptable for this installation.
		</div><div class="para">
			Once this installation is complete, you'll want to connect to your freshly installed machine via SSH as the root user. Note that you should not allow root logins in a production environment, so be sure to turn off remote logins once you have finished the installation and configuration.
		</div><div class="section" id="sect-qig-Environment-operatingsys-network"><div class="titlepage"><div><div><h3 class="title">2.1.1. Configuring the network</h3></div></div></div><div class="para">
				By default the network will not come up on your hardware and you will need to configure it to work in your environment. Since we specified that there will be no DHCP server in this environment we will be manually configuring your network interface. We will assume, for the purposes of this exercise, that eth0 is the only network interface that will be connected and used.
			</div><div class="para">
				Connecting via the console you should login as root. Check the file <code class="filename">/etc/sysconfig/network-scripts/ifcfg-eth0</code>, it will look like this by default: 
<pre class="screen">
DEVICE="eth0"
HWADDR="52:54:00:B9:A6:C0"
NM_CONTROLLED="yes"
ONBOOT="no"
</pre>

			</div><div class="para">
				Unfortunately, this configuration will not permit you to connect to the network, and is also unsuitable for our purposes with CloudStack. We want to configure that file so that it specifies the IP address, netmask, etc., as shown in the following example:
			</div><div class="important"><div class="admonition_header"><h2>Hardware Addresses</h2></div><div class="admonition"><div class="para">
					You should not use the hardware address (aka MAC address) from our example for your configuration. It is network interface specific, so you should keep the address already provided in the HWADDR directive.
				</div></div></div><pre class="screen">
DEVICE=eth0
HWADDR=52:54:00:B9:A6:C0
NM_CONTROLLED=no
ONBOOT=yes
BOOTPROTO=none
IPADDR=172.16.10.2
NETMASK=255.255.255.0
GATEWAY=172.16.10.1
DNS1=8.8.8.8
DNS2=8.8.4.4
</pre><div class="note"><div class="admonition_header"><h2>IP Addressing</h2></div><div class="admonition"><div class="para">
					Throughout this document we are assuming that you will have a /24 network for your CloudStack implementation. This can be any RFC 1918 network. However, we are assuming that you will match the machine address that we are using. Thus we may use <strong class="userinput"><code><em class="replaceable"><code>172.16.10</code></em>.2</code></strong> and because you might be using the 192.168.55.0/24 network you would use <strong class="userinput"><code><em class="replaceable"><code>192.168.55</code></em>.2</code></strong>
				</div></div></div><div class="para">
				Now that we have the configuration files properly set up, we need to run a few commands to start up the network
			</div><pre class="screen"><code class="prompt"># </code><strong class="userinput"><code><code class="command">chkconfig</code> network on</code></strong></pre><pre class="screen"><code class="prompt"># </code><strong class="userinput"><code><code class="command">service</code> network start</code></strong></pre></div><div class="section" id="sect-qig-Environment-operatingsys-hostname"><div class="titlepage"><div><div><h3 class="title">2.1.2. Hostname</h3></div></div></div><div class="para">
				Cloudstack requires that the hostname be properly set. If you used the default options in the installation, then your hostname is currently set to localhost.localdomain. To test this we will run:
			</div><pre class="screen"><code class="prompt"># </code><strong class="userinput"><code>hostname --fqdn</code></strong></pre><div class="para">
				At this point it will likely return:
			</div><pre class="screen">localhost</pre><div class="para">
				To rectify this situation - we'll set the hostname by editing the <code class="filename">/etc/hosts</code> file so that it follows a similar format to this example:
<pre class="screen">
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
172.16.10.2 srvr1.cloud.priv
</pre>

			</div><div class="para">
				After you've modified that file, go ahead and restart the network using:
			</div><pre class="screen"><code class="prompt"># </code><strong class="userinput"><code><code class="command">service</code> network restart</code></strong></pre><div class="para">
				Now recheck with the <code class="command">hostname --fqdn</code> command and ensure that it returns a FQDN response
			</div></div><div class="section" id="sect-qig-Environment-operatingsys-selinux"><div class="titlepage"><div><div><h3 class="title">2.1.3. SELinux</h3></div></div></div><div class="para">
				At the moment, for CloudStack to work properly SELinux must be set to permissive. We want to both configure this for future boots and modify it in the current running system.
			</div><div class="para">
				To configure SELinux to be permissive in the running system we need to run the following command:
			</div><pre class="screen"><code class="prompt"># </code><strong class="userinput"><code><code class="command">setenforce</code> 0</code></strong></pre><div class="para">
				To ensure that it remains in that state we need to configure the file <code class="filename">/etc/selinux/config</code> to reflect the permissive state, as shown in this example:
			</div><pre class="screen">

# This file controls the state of SELinux on the system.
# SELINUX= can take one of these three values:
#     enforcing - SELinux security policy is enforced.
#     permissive - SELinux prints warnings instead of enforcing.
#     disabled - No SELinux policy is loaded.
SELINUX=permissive
# SELINUXTYPE= can take one of these two values:
#     targeted - Targeted processes are protected,
#     mls - Multi Level Security protection.
SELINUXTYPE=targeted
</pre></div><div class="section" id="sect-qig-Environment-operatingsys-ntp"><div class="titlepage"><div><div><h3 class="title">2.1.4. NTP</h3></div></div></div><div class="para">
				NTP configuration is a necessity for keeping all of the clocks in your cloud servers in sync. However, NTP is not installed by default. So we'll install and and configure NTP at this stage. Installation is accomplished as follows:
			</div><pre class="screen"><code class="prompt"># </code><strong class="userinput"><code><code class="command">yum</code> -y install ntp</code></strong></pre><div class="para">
				The actual default configuration is fine for our purposes, so we merely need to enable it and set it to start on boot as follows:
			</div><pre class="screen"><code class="prompt"># </code><strong class="userinput"><code><code class="command">chkconfig</code> ntpd on</code></strong></pre><pre class="screen"><code class="prompt"># </code><strong class="userinput"><code><code class="command">service</code> ntpd start</code></strong></pre></div><div class="section" id="sect-qig-Environment-operatingsys-repoconfig"><div class="titlepage"><div><div><h3 class="title">2.1.5. Configuring the CloudStack Package Repository</h3></div></div></div><div class="para">
				We need to configure the machine to use a CloudStack package repository. 
				<div class="important"><div class="admonition_header"><h2>The below repository is not an official Apache CloudStack project repository</h2></div><div class="admonition"><div class="para">
						The Apache CloudStack official releases are source code. As such there are no 'official' binaries available. The full installation guide describes how to take the source release and generate RPMs and and yum repository. This guide attempts to keep things as simple as possible, and thus we are using one of the community-provided yum repositories.
					</div></div></div>

			</div><div class="para">
				To add the CloudStack repository, create <code class="filename">/etc/yum.repos.d/cloudstack.repo</code> and insert the following information.
			</div><pre class="programlisting">
[cloudstack]
name=cloudstack
baseurl=http://cloudstack.apt-get.eu/rhel/4.1/
enabled=1
gpgcheck=0
</pre></div></div><div class="section" id="sect-qig-Environment-nfs"><div class="titlepage"><div><div><h2 class="title">2.2. NFS</h2></div></div></div><div class="para">
			Our configuration is going to use NFS for both primary and secondary storage. We are going to go ahead and setup two NFS shares for those purposes. We'll start out by installing <span class="application"><strong>nfs-utils</strong></span>.
		</div><pre class="screen"><code class="prompt"># </code><strong class="userinput"><code><code class="command">yum</code> install nfs-utils</code></strong></pre><div class="para">
			We now need to configure NFS to serve up two different shares. This is handled comparatively easily in the <code class="filename">/etc/exports</code> file. You should ensure that it has the following content:
		</div><pre class="screen">
/secondary *(rw,async,no_root_squash)
/primary   *(rw,async,no_root_squash)
</pre><div class="para">
			You will note that we specified two directories that don't exist (yet) on the system. We'll go ahead and create those directories and set permissions appropriately on them with the following commands:
		</div><pre class="screen">
<code class="prompt"># </code><strong class="userinput"><code><code class="command">mkdir</code> /primary</code></strong>
<code class="prompt"># </code><strong class="userinput"><code><code class="command">mkdir</code> /secondary</code></strong>
</pre><div class="para">
			CentOS 6.x releases use NFSv4 by default. NFSv4 requires that domain setting matches on all clients. In our case, the domain is cloud.priv, so ensure that the domain setting in <code class="filename">/etc/idmapd.conf</code> is uncommented and set as follows:
		</div><pre class="screen">Domain = cloud.priv</pre><div class="para">
			Now you'll need uncomment the configuration values in the file <code class="filename">/etc/sysconfig/nfs</code>
		</div><pre class="screen">
LOCKD_TCPPORT=32803
LOCKD_UDPPORT=32769
MOUNTD_PORT=892
RQUOTAD_PORT=875
STATD_PORT=662
STATD_OUTGOING_PORT=2020
</pre><div class="para">
			Now we need to configure the firewall to permit incoming NFS connections. Edit the file <code class="filename">/etc/sysconfig/iptables</code>
		</div><pre class="screen">
-A INPUT -s 172.16.10.0/24 -m state --state NEW -p udp --dport 111 -j ACCEPT
-A INPUT -s 172.16.10.0/24 -m state --state NEW -p tcp --dport 111 -j ACCEPT
-A INPUT -s 172.16.10.0/24 -m state --state NEW -p tcp --dport 2049 -j ACCEPT
-A INPUT -s 172.16.10.0/24 -m state --state NEW -p tcp --dport 32803 -j ACCEPT
-A INPUT -s 172.16.10.0/24 -m state --state NEW -p udp --dport 32769 -j ACCEPT
-A INPUT -s 172.16.10.0/24 -m state --state NEW -p tcp --dport 892 -j ACCEPT
-A INPUT -s 172.16.10.0/24 -m state --state NEW -p udp --dport 892 -j ACCEPT
-A INPUT -s 172.16.10.0/24 -m state --state NEW -p tcp --dport 875 -j ACCEPT
-A INPUT -s 172.16.10.0/24 -m state --state NEW -p udp --dport 875 -j ACCEPT
-A INPUT -s 172.16.10.0/24 -m state --state NEW -p tcp --dport 662 -j ACCEPT
-A INPUT -s 172.16.10.0/24 -m state --state NEW -p udp --dport 662 -j ACCEPT
</pre><div class="para">
			Now you can restart the iptables service with the following command:
		</div><pre class="screen"><code class="prompt"># </code><strong class="userinput"><code><code class="command">service</code> iptables restart</code></strong></pre><div class="para">
			We now need to configure nfs service to start on boot and actually start it on the host by executing the following commands:
		</div><pre class="screen">
<code class="prompt"># </code><strong class="userinput"><code><code class="command">service</code> rpcbind start</code></strong>
<code class="prompt"># </code><strong class="userinput"><code><code class="command">service</code> nfs start</code></strong>
<code class="prompt"># </code><strong class="userinput"><code><code class="command">chkconfig</code> rpcbind on</code></strong>
<code class="prompt"># </code><strong class="userinput"><code><code class="command">chkconfig</code> nfs on</code></strong>
</pre></div></div><div xml:lang="en-US" class="chapter" id="chap-qig-Management" lang="en-US"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Installation of the management server</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="#sect-qig-Management-database">3.1. Database Installation and Configuration</a></span></dt><dt><span class="section"><a href="#sect-qig-Management-installation">3.2. Installation</a></span></dt><dt><span class="section"><a href="#sect-qig-Management-templatesetup">3.3. System Template Setup</a></span></dt></dl></div><div class="para">
		Now it is time to start installing CloudStack's management server and some of the related components.
	</div><div class="section" id="sect-qig-Management-database"><div class="titlepage"><div><div><h2 class="title">3.1. Database Installation and Configuration</h2></div></div></div><div class="para">
			We'll start out by installing <span class="application"><strong>MySQL</strong></span> and configuring some options to ensure CloudStack runs well.
		</div><div class="para">
			To install <span class="application"><strong>MySQL</strong></span> run the following command: 
<pre class="screen"><code class="prompt"># </code><strong class="userinput"><code><code class="command">yum</code> -y install mysql-server</code></strong></pre>

		</div><div class="para">
			With <span class="application"><strong>MySQL</strong></span> installed we need to make a few configuration changes to <code class="filename">/etc/my.cnf</code>. Specifically we need to add the following options to the [mysqld] section: 
<pre class="screen">
innodb_rollback_on_timeout=1
innodb_lock_wait_timeout=600
max_connections=350
log-bin=mysql-bin
binlog-format = 'ROW' 
</pre>

		</div><div class="para">
			Now that <span class="application"><strong>MySQL</strong></span> is properly configured we can start it and configure it to start on boot as follows: 
<pre class="screen">
<code class="prompt"># </code><strong class="userinput"><code><code class="command">service</code> mysqld start</code></strong>
<code class="prompt"># </code><strong class="userinput"><code><code class="command">chkconfig</code> mysqld on</code></strong>
</pre>

		</div></div><div class="section" id="sect-qig-Management-installation"><div class="titlepage"><div><div><h2 class="title">3.2. Installation</h2></div></div></div><div class="para">
			We are now going to install the management server. We do that by executing the following command: 
<pre class="screen"><code class="prompt"># </code><strong class="userinput"><code><code class="command">yum</code> -y install cloud-client</code></strong></pre>

		</div><div class="para">
			With the application itself installed we can now setup the database, we'll do that with the following command and options:
		</div><pre class="screen"><code class="prompt"># </code><strong class="userinput"><code><code class="command">cloudstack-setup-databases</code> cloud:<em class="replaceable"><code>password</code></em>@localhost --deploy-as=root</code></strong></pre><div class="para">
			When this process is finished, you should see a message like "CloudStack has successfully initialized the database."
		</div><div class="para">
			Now that the database has been created, we can take the final step in setting up the management server by issuing the following command:
		</div><pre class="screen"><code class="prompt"># </code><strong class="userinput"><code><code class="command">cloudstack-setup-management</code></code></strong></pre></div><div class="section" id="sect-qig-Management-templatesetup"><div class="titlepage"><div><div><h2 class="title">3.3. System Template Setup</h2></div></div></div><div class="para">
			CloudStack uses a number of system VMs to provide functionality for accessing the console of virtual machines, providing various networking services, and managing various aspects of storage. This step will acquire those system images ready for deployment when we bootstrap your cloud.
		</div><div class="para">
			Now we need to download the system VM template and deploy that to the share we just mounted. The management server includes a script to properly manipulate the system VMs images.
		</div><pre class="screen"><code class="prompt"># </code><strong class="userinput"><code><code class="command">/usr/share/cloudstack-common/scripts/storage/secondary/cloud-install-sys-tmplt</code> -m /secondary -u http://download.cloud.com/templates/acton/acton-systemvm-02062012.qcow2.bz2 -h kvm -F</code></strong>
</pre><div class="para">
			That concludes our setup of the management server. We still need to configure CloudStack, but we will do that after we get our hypervisor set up.
		</div></div></div><div xml:lang="en-US" class="chapter" id="chap-qig-KVM" lang="en-US"><div class="titlepage"><div><div><h1 class="title">Chapter 4. KVM Setup and installation</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="#sect-qig-KVM-Prerequisites">4.1. Prerequisites</a></span></dt><dt><span class="section"><a href="#sect-qig-KVM-Installation">4.2. Installation</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-qig-KVM-Configuration">4.2.1. KVM Configuration</a></span></dt></dl></dd></dl></div><div class="para">
		KVM is the hypervisor we'll be using - we will recover the initial setup which has already been done on the hypervisor host and cover installation of the agent software, you can use the same steps to add additional KVM nodes to your CloudStack environment.
	</div><div class="section" id="sect-qig-KVM-Prerequisites"><div class="titlepage"><div><div><h2 class="title">4.1. Prerequisites</h2></div></div></div><div class="para">
			We explicitly are using the management server as a compute node as well, which means that we have already performed many of the prerequisite steps when setting up the management server, but we will list them here for clarity. Those steps are: 
			<div class="orderedlist"><ol><li class="listitem"><div class="para">
						<a class="xref" href="#sect-qig-Environment-operatingsys-network">Section 2.1.1, “Configuring the network”</a>
					</div></li><li class="listitem"><div class="para">
						<a class="xref" href="#sect-qig-Environment-operatingsys-hostname">Section 2.1.2, “Hostname”</a>
					</div></li><li class="listitem"><div class="para">
						<a class="xref" href="#sect-qig-Environment-operatingsys-selinux">Section 2.1.3, “SELinux”</a>
					</div></li><li class="listitem"><div class="para">
						<a class="xref" href="#sect-qig-Environment-operatingsys-ntp">Section 2.1.4, “NTP”</a>
					</div></li><li class="listitem"><div class="para">
						<a class="xref" href="#sect-qig-Environment-operatingsys-repoconfig">Section 2.1.5, “Configuring the CloudStack Package Repository”</a>
					</div></li></ol></div>

		</div><div class="para">
			You shouldn't need to do that for the management server, of course, but any additional hosts will need for you to complete the above steps.
		</div></div><div class="section" id="sect-qig-KVM-Installation"><div class="titlepage"><div><div><h2 class="title">4.2. Installation</h2></div></div></div><div class="para">
			Installation of the KVM agent is trivial with just a single command, but afterwards we'll need to configure a few things.
		</div><pre class="screen"><code class="prompt"># </code><strong class="userinput"><code><code class="command">yum</code> -y install cloud-agent</code></strong></pre><div class="section" id="sect-qig-KVM-Configuration"><div class="titlepage"><div><div><h3 class="title">4.2.1. KVM Configuration</h3></div></div></div><div class="para">
				We have two different parts of KVM to configure, libvirt, and QEMU.
			</div><div class="section" id="sect-qig-KVM-Configuration-qemu"><div class="titlepage"><div><div><h4 class="title">4.2.1.1. QEMU Configuration</h4></div></div></div><div class="para">
					KVM configuration is relatively simple at only a single item. We need to edit the QEMU VNC configuration. This is done by editing <code class="filename">/etc/libvirt/qemu.conf</code> and ensuring the following line is present and uncommented. 
<pre class="screen">vnc_listen=0.0.0.0</pre>

				</div></div><div class="section" id="sect-qig-KVM-Configuration-libvirt"><div class="titlepage"><div><div><h4 class="title">4.2.1.2. Libvirt Configuration</h4></div></div></div><div class="para">
					CloudStack uses libvirt for managing virtual machines. Therefore it is vital that libvirt is configured correctly. Libvirt is a dependency of cloud-agent and should already be installed.
				</div><div class="orderedlist"><ol><li class="listitem"><div class="para">
							In order to have live migration working libvirt has to listen for unsecured TCP connections. We also need to turn off libvirts attempt to use Multicast DNS advertising. Both of these settings are in <code class="filename">/etc/libvirt/libvirtd.conf</code>
						</div><div class="para">
							Set the following paramaters:
						</div><pre class="programlisting">listen_tls = 0</pre><pre class="programlisting">listen_tcp = 1</pre><pre class="programlisting">tcp_port = "16059"</pre><pre class="programlisting">auth_tcp = "none"</pre><pre class="programlisting">mdns_adv = 0</pre></li><li class="listitem"><div class="para">
							Turning on "listen_tcp" in libvirtd.conf is not enough, we have to change the parameters as well:
						</div><div class="para">
							On RHEL or CentOS modify <code class="filename">/etc/sysconfig/libvirtd</code>:
						</div><div class="para">
							Uncomment the following line:
						</div><pre class="programlisting">#LIBVIRTD_ARGS="--listen"</pre><div class="para">
							On Ubuntu: modify <code class="filename">/etc/init/libvirt-bin.conf</code>
						</div><div class="para">
							Change the following line (at the end of the file):
						</div><pre class="programlisting">exec /usr/sbin/libvirtd -d</pre><div class="para">
							to (just add -l)
						</div><pre class="programlisting">exec /usr/sbin/libvirtd -d -l</pre></li><li class="listitem"><div class="para">
							Restart libvirt
						</div><div class="para">
							In RHEL or CentOS:
						</div><pre class="programlisting"><code class="command">$ service libvirtd restart</code></pre><div class="para">
							In Ubuntu:
						</div><pre class="programlisting"><code class="command">$ service libvirt-bin restart</code></pre></li></ol></div></div><div class="section" id="sect-qig-KVM-Configuration-finish"><div class="titlepage"><div><div><h4 class="title">4.2.1.3. KVM configuration complete</h4></div></div></div><div class="para">
					That concludes our installation and configuration of KVM, and we'll now move to using the CloudStack UI for the actual configuration of our cloud.
				</div></div></div></div></div><div xml:lang="en-US" class="chapter" id="chap-qig-Config" lang="en-US"><div class="titlepage"><div><div><h1 class="title">Chapter 5. Configuration</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="#sect-qig-Config-UI_Access">5.1. UI Access</a></span></dt><dt><span class="section"><a href="#sect-qig-Config-Zone">5.2. Setting up a Zone</a></span></dt><dt><span class="section"><a href="#sect-qig-Config-Pod">5.3. Pod Configuration</a></span></dt><dt><span class="section"><a href="#Runbook-config-cluster">5.4. Cluster</a></span></dt><dd><dl><dt><span class="section"><a href="#Runbook-config-cluster-pristorage">5.4.1. Primary Storage</a></span></dt><dt><span class="section"><a href="#Runbook-config-cluster-secstorage">5.4.2. Secondary Storage</a></span></dt></dl></dd></dl></div><div class="para">
		As we noted before we will be using security groups to provide isolation and by default that implies that we'll be using a flat layer-2 network. It also means that the simplicity of our setup means that we can use the quick installer.
	</div><div class="section" id="sect-qig-Config-UI_Access"><div class="titlepage"><div><div><h2 class="title">5.1. UI Access</h2></div></div></div><div class="para">
			To get access to CloudStack's web interface, merely point your browser to http://<em class="replaceable"><code>172.16.10.</code></em>2:8080/client The default username is 'admin', and the default password is 'password'. You should see a splash screen that allows you to choose several options for setting up CloudStack. You should choose the <code class="option">Continue with Basic Setup</code> option.
		</div><div class="para">
			You should now see a prompt requiring you to change the password for the admin user. Please do so.
		</div></div><div class="section" id="sect-qig-Config-Zone"><div class="titlepage"><div><div><h2 class="title">5.2. Setting up a Zone</h2></div></div></div><div class="para">
			A zone is the largest organization entity in CloudStack - and we'll be creating one, this should be the screen that you see in front of you now. And for us there are 5 pieces of information that we need. 
			<div class="orderedlist"><ol><li class="listitem"><div class="para">
						Name - we will set this to the ever-descriptive 'Zone1' for our cloud.
					</div></li><li class="listitem"><div class="para">
						Public DNS 1 - we will set this to '8.8.8.8' for our cloud.
					</div></li><li class="listitem"><div class="para">
						Public DNS 2 - we will set this to '8.8.4.4' for our cloud.
					</div></li><li class="listitem"><div class="para">
						Internal DNS1 - we will also set this to '8.8.8.8' for our cloud.
					</div></li><li class="listitem"><div class="para">
						Internal DNS2 - we will also set this to '8.8.8.4' for our cloud.
					</div></li></ol></div>

		</div><div class="note"><div class="admonition_header"><h2>Notes about DNS settings</h2></div><div class="admonition"><div class="para">
				CloudStack distinguishes between internal and public DNS. Internal DNS is assumed to be capable of resolving internal-only hostnames, such as your NFS server’s DNS name. Public DNS is provided to the guest VMs to resolve public IP addresses. You can enter the same DNS server for both types, but if you do so, you must make sure that both internal and public IP addresses can route to the DNS server. In our specific case we will not use any names for resources internally, and we have indeed them set to look to the same external resource so as to not add a namerserver setup to our list of requirements.
			</div></div></div></div><div class="section" id="sect-qig-Config-Pod"><div class="titlepage"><div><div><h2 class="title">5.3. Pod Configuration</h2></div></div></div><div class="para">
			Now that we've added a Zone, the next step that comes up is a prompt for information regading a pod. Which is looking for 4 items. 
			<div class="orderedlist"><ol><li class="listitem"><div class="para">
						Name - We'll use Pod1 for our cloud.
					</div></li><li class="listitem"><div class="para">
						Gateway - We'll use <em class="replaceable"><code>172.16.10</code></em>.1 as our gateway
					</div></li><li class="listitem"><div class="para">
						Netmask - We'll use 255.255.255.0
					</div></li><li class="listitem"><div class="para">
						Start/end reserved system IPs - we will use 172.16.10.10-172.16.10.20
					</div></li><li class="listitem"><div class="para">
						Guest gateway - We'll use <em class="replaceable"><code>172.16.10</code></em>.1
					</div></li><li class="listitem"><div class="para">
						Guest netmask - We'll use 255.255.255.0
					</div></li><li class="listitem"><div class="para">
						Guest start/end IP - We'll use <em class="replaceable"><code>172.16.10.</code></em>30-<em class="replaceable"><code>172.16.10.</code></em>200
					</div></li></ol></div>

		</div></div><div class="section" id="Runbook-config-cluster"><div class="titlepage"><div><div><h2 class="title">5.4. Cluster</h2></div></div></div><div class="para">
			Now that we've added a Zone, we need only add a few more items for configuring the cluster. 
			<div class="orderedlist"><ol><li class="listitem"><div class="para">
						Name - We'll use Cluster1
					</div></li><li class="listitem"><div class="para">
						Hypervisor - Choose KVM
					</div></li></ol></div>

		</div><div class="para">
			You should be prompted to add the first host to your cluster at this point. Only a few bits of information are needed. 
			<div class="orderedlist"><ol><li class="listitem"><div class="para">
						Hostname - we'll use the IP address <em class="replaceable"><code>172.16.10.</code></em>2 since we didn't set up a DNS server.
					</div></li><li class="listitem"><div class="para">
						Username - we'll use 'root'
					</div></li><li class="listitem"><div class="para">
						Password - enter the operating system password for the root user
					</div></li></ol></div>

		</div><div class="section" id="Runbook-config-cluster-pristorage"><div class="titlepage"><div><div><h3 class="title">5.4.1. Primary Storage</h3></div></div></div><div class="para">
				With your cluster now setup - you should be prompted for primary storage information. Choose NFS as the storage type and then enter the following values in the fields: 
				<div class="orderedlist"><ol><li class="listitem"><div class="para">
							Name - We'll use 'Primary1'
						</div></li><li class="listitem"><div class="para">
							Server - We'll be using the IP address <em class="replaceable"><code>172.16.10.</code></em>2
						</div></li><li class="listitem"><div class="para">
							Path - Well define /primary as the path we are using
						</div></li></ol></div>

			</div></div><div class="section" id="Runbook-config-cluster-secstorage"><div class="titlepage"><div><div><h3 class="title">5.4.2. Secondary Storage</h3></div></div></div><div class="para">
				If this is a new zone, you'll be prompted for secondary storage information - populate it as follows: 
				<div class="orderedlist"><ol><li class="listitem"><div class="para">
							NFS server - We'll use the IP address <em class="replaceable"><code>172.16.10.</code></em>2
						</div></li><li class="listitem"><div class="para">
							Path - We'll use /secondary
						</div></li></ol></div>

			</div><div class="para">
				Now, click Launch and your cloud should begin setup - it may take several minutes depending on your internet connection speed for setup to finalize.
			</div></div></div></div><div xml:lang="en-US" class="appendix" id="appe-qig-Revision_History" lang="en-US"><div class="titlepage"><div><div><h1 class="title">Revision History</h1></div></div></div><div class="para">
		<div class="revhistory"><table summary="Revision History"><tr><th align="left" valign="top" colspan="3"><strong>Revision History</strong></th></tr><tr><td align="left">Revision 0-0</td><td align="left">Fri Jun 28 2013</td><td align="left"> </td></tr><tr><td align="left" colspan="3">
					<table border="0" summary="Simple list" class="simplelist"><tr><td>Initial creation of book by publican</td></tr></table>

				</td></tr></table></div>

	</div></div></div></body></html>
